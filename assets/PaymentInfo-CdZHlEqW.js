import{a as h,ac as g,X as r,Y as a,Z as t,a0 as i,aT as b,aj as l,ai as x,ae as k,aM as v,at as w,ag as S,$ as P}from"./vendor-CrjBpg2X.js";import{b as C}from"./vue-router-Bw7KlpfK.js";import{a as $,b as B,d as D,_ as T,c as M}from"./index-BV9TEh6D.js";import{d as N}from"./pinia-CU3xBjd1.js";import{S as u}from"./sweetalert2-BY1s0Tb6.js";function V(s){const o=new Date(s*1e3);return`${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()} ${o.getHours()}:${o.getMinutes()}`}const I={postPay(s){return $.post(`/pay/${s}`).then(o=>o.data)}},O=N("usePay",()=>{const s=B(),o=D();return{postPay:async c=>{s.isLoading=!0;try{const d=await I.postPay(c);u.fire({icon:"success",title:`${d.message}`,showConfirmButton:!1,timer:1500}),await o.getOrders()}catch(d){u.fire({icon:"error",title:`${d.message}`})}finally{s.isLoading=!1}}}}),j={class:"border border-danger p-4 rounded custom-shadow mt-4 mt-md-0"},q={class:"pb-2",style:{"font-size":"12px",display:"block"}},z={class:"border-bottom"},L={key:0,class:"text-end border-0 px-0"},Y={class:"border-bottom"},A={key:0,class:"text-end border-0 px-0"},E={class:"border-bottom"},F={key:0,class:"text-end border-0 px-0"},H={class:"border-bottom"},R={key:0,class:"text-end border-0 px-0"},X={class:"border-bottom"},Z={class:"text-end border-0 px-0"},G={key:0,class:"badge rounded-pill bg-success"},J={key:1,class:"badge rounded-pill bg-secondary"},K={key:0,class:"d-grid gap-2"},Q={key:1,class:"d-grid gap-2"},U={__name:"PaymentInfo",props:{id:{type:String,required:!0},order:{type:Object,default:()=>({})},isPaid:{type:Boolean,default:!1}},setup(s){const o=C(),m=M(),c=O(),d=s,n=h(()=>d.order.user),f=()=>{u.fire({title:"是否確定結帳?",icon:"question",showCancelButton:!0,confirmButtonColor:"#dc3534",cancelButtonText:"取消",confirmButtonText:"是的！"}).then(p=>{p.isConfirmed&&y()})},y=async()=>{await c.postPay(d.id),o.push(`/checkout/${d.id}`)};return(p,e)=>{const _=g("router-link");return r(),a("div",j,[e[6]||(e[6]=t("h4",{class:"mb-1"},"訂購資訊",-1)),t("small",q," 建立時間："+i(b(V)(s.order.create_at)),1),t("table",{class:x(["table mb-4 small",{"table-dark":b(m).isDarkMode}])},[t("tbody",null,[t("tr",z,[e[0]||(e[0]=t("th",{class:"border-0 px-0 fw-normal"},"收件人姓名",-1)),n.value?(r(),a("td",L,i(n.value.name),1)):l("",!0)]),t("tr",Y,[e[1]||(e[1]=t("th",{class:"border-0 px-0 fw-normal"},"收件人電話",-1)),n.value?(r(),a("td",A,i(n.value.tel),1)):l("",!0)]),t("tr",E,[e[2]||(e[2]=t("th",{class:"border-0 px-0 fw-normal"},"收件人地址",-1)),n.value?(r(),a("td",F,i(n.value.address),1)):l("",!0)]),t("tr",H,[e[3]||(e[3]=t("th",{class:"border-0 px-0 fw-normal"},"付款方式",-1)),n.value?(r(),a("td",R,i(n.value.payment),1)):l("",!0)]),t("tr",X,[e[4]||(e[4]=t("th",{class:"border-0 px-0 fw-normal"},"付款狀態",-1)),t("td",Z,[s.order.is_paid?(r(),a("span",G,"付款完成")):(r(),a("span",J,"尚未付款"))])])])],2),k(t("div",null,[s.order.is_paid?(r(),a("div",Q,[w(_,{to:"/products",class:"btn btn-danger",prefetch:""},{default:S(()=>e[5]||(e[5]=[P("回到商品頁")])),_:1})])):(r(),a("div",K,[t("button",{type:"button",class:"btn btn-danger",onClick:f},"結帳去")]))],512),[[v,!s.isPaid]])])}}},rt=T(U,[["__scopeId","data-v-9d6133cd"]]);export{rt as P};
